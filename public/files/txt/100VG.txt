100VG-AnyLAN

В июле 1993 года по инициативе компаний AT&T и Hewlett-Packard был организован новый комитет IEEE 802.12, призванный стандартизовать новую технологию 100BaseVG. Данная технология представляла собой высокоскоростное расширение стандарта IEEE 802.3 (известного также как 100BaseT, или Ethernet на витой паре).
В сентябре компания IBM предложила объединить в новом стандарте поддержку Ethernet и Token Ring. Изменилось и название новой технологии - 100VG-AnyLAN.
Технология должна поддерживать как уже существующие сетевые приложения, так и вновь создаваемые. На это направлена одновременная поддержка форматов кадров данных и Ethernet, и Token Ring, обеспечивающая прозрачность сетей, построенных по новой технологии, для существующих программ.
С некоторых пор витая пара повсеместно заменяет коаксильные кабели. Ее преимущества - большая мобильность и надежность, низкая стоимость и более простое администрирование сети. Процесс вытеснения коаксильных кабелей идет и у нас. Стандарт 100VG-AnyLAN ориентирован как на витые пары (для использования пригодно любое имеющееся кабельное хозяйство), так и на оптоволоконные линии, допускающие значительную удаленность абонентов. Впрочем, на скорости обмена применение оптоволокна не сказывается.
Топология
Поскольку 100VG призвана заменить собой Ethernet и Token Ring, она поддерживает топологии, применяемые для этих сетей (логически общая шина и маркерное кольцо, соответственно). Физическая топология - обязательно звезда, петли или ветвления не допускаются.
При каскадном подключении хабов между ними допускается только одна линия связи. Образование резервных линий возможно лишь при условии, что в каждый момент активна ровно одна.
Стандартом предусмотрено до 1024 узлов в одном сегменте сети, но из-за снижения производительности сети реальный максимум более скромен - 250 узлов. Похожими соображениями определяется и максимальное удаление между наиболее удаленными узлами - два с половиной километра.
К сожалению, стандартом не допускается объединение в одном сегменте систем, использующих одновременно форматы Ethernet и Token Ring. Для таких сетей предназначены специальные 100VG-AnyLAN мосты Token Ring-Ethernet. Зато в случае конфигурации 100VG-Ethernet сегмент Ethernet с обычной скоростью обмена (10 Мбит/сек) может быть присоединен посредством простого преобразователя скорости.
В соответствии с рекомендациями IEEE 802.1D между двумя узлами одной сети не может быть более семи мостов.
Оборудование
Передающие среды. Для 100Base-T Ethernet используются кабели, содержащие четыре неэкранированные витые пары. Одна пара служит для передачи данных, одна - для разрешения конфликтов; две оставшиеся пары не используются. Очевидно, что передача данных по всем четырем парам даст выигрыш вчетверо. Замена стандартного "манчестерского" кода более эффективным - 5B6B NRZ - дает выигрыш еще почти вдвое (за счет передачи двух битов данных за один такт). Таким образом, при лишь незначительно повышении несущей частоты (около 20%), производительность линии связи повышается в десять раз. При работе с экранированными кабелями, характерными для сетей Token Ring, используются две витые пары, но при вдвое большей частоте (благодаря тому, что кабель экранирован). При передаче по такому кабелю каждая пара используется в качестве фиксированного однонаправленного канала. По одной паре передаются входные данные, по другой выходные. Стандартное удаление узлов, на котором гарантируются параметры передачи - 100 метров для пар третьей и четвертой категории и 200 метров для пятой.
Допускается использование оптоволоконных пар. Благодаря такому носителю покрываемое расстояние увеличивается до двух километров. Как и в случае экранированного кабеля, используется двунаправленное соединение.
Хабы 100VG могут соединяться каскадом, что обеспечивает максимальное расстояние между узлами в одном сегменте на неэкранированных кабелях до 2.5 километров.
Хабы. Главным действующим лицом при построении сети 100VG-AnyLAN является хаб (или концентратор). Все устройства сети, независимо от их назначения, присоединяются к хабам. Выделяют два типа соединений: для связи "вверх" и "вниз". Под связью "вверх" подразумевается соединение с хабом более высокого уровня. "Вниз" - это соединение с оконечными узлами и хабами более низкого уровня (по одному порту на каждое устройство или хаб).
Чтобы защитить данные от несанкционированного доступа, реализовано два режима работы каждого порта: конфиденциальный и публичный. В конфиденциальном режиме каждый порт получает только сообщения, адресованные непосредственно ему, в публичном - все сообщения. Обычно публичный режим используется для подключения мостов и маршрутизаторов, а также различного рода диагностической аппаратуры.
Для того, чтобы повысить производительность системы, адресованные конкретному узлу данные только ему и передаются. Данные же, предназначенные для широкого вещания, буферизуются до окончания передачи, а затем рассылаются всем абонентам.
100VG-AnyLAN и модель OSI
В предполагаемом стандарте IEEE 802.12, 100VG-AnyLAN определяется на уровне передачи данных (2-й уровень семиуровневой модели ISO) и на физическом уровне (1-й уровень ISO).
Уровень передачи данных разбит на два подуровня: логического контроля соединения (LLC - Logical Link Control) и контроля доступа к среде (MAC - Medium Access Control).
Стандартом OSI на уровень передачи данных возлагается ответственность за обеспечение надежной передачи данных между двумя узлами сети. Получая пакет для передачи от более высокого сетевого уровня, уровень передачи данных присоединяет к этому пакету адреса получателя и отправителя, формирует из него набор кадров для передачи и обеспечивает избыточность, необходимую для выявления и исправления ошибок. Уровень передачи данных обеспечивает поддержку форматов кадров Ethernet и Token Ring.
Верхний подуровень - логического контроля соединений - обеспечивает режимы передачи данных как с установлением, так и без установления соединения.
Нижний подуровень - контроля доступа к среде - при передаче обеспечивает окончательное формирование кадра передачи в соответствии с протоколом, реализованным в данном сегменте (IEEE 802.3 или 802.5). Если же речь идет о получении пакета, подуровень выясняет соответствие адреса, осуществляет проверку контрольной суммы и определяет ошибки передачи.
Логически MAC-подуровень можно разделить на три основных компонента: протокол приоритета запросов, система тестирования соединений и система подготовки кадров передачи.
Протокол приоритетов запросов - Demand Priority Protocol (DPP) - трактуется стандартом 100VG-AnyLAN как составная часть MAC-подуровня. DPP определяет порядок обработки запросов и установления соединений.
Когда конечный узел готов передать пакет, он отправляет хабу запрос обычного или высокого приоритета. Если узлу нечего передать, он отправляет сигнал "свободен". Если узел не активен (например, компьютер выключен), он, естественно, ничего не посылает. В случае каскадного соединения хабов при запросе узлом передачи у хаба нижнего уровня последний транслирует запрос "вверх".
Хаб циклически опрашивает порты, выясняя их готовность к передаче. Если к передаче приготовились сразу несколько узлов, хаб анализирует их запросы, опираясь на два критерия - приоритет запроса и физический номер порта, к которому присоединен передающий узел.
Сначала, естественно, обрабатываются запросы высокого приоритета. Такие приоритеты используются приложениями, критичными к времени реакции, например, полноформатными системами мультимедиа. Администратор сети может ассоциировать выделенные порты с высокими приоритетами. Для того, чтобы избежать потерь производительности, вводится специальный механизм, не допускающий присвоения высокого приоритета всем запросам, исходящим от одного узла. Сделанные одновременно несколько запросов высокого приоритета обрабатываются в соответствии с физическим адресом порта.
После того, как обработаны все высокоприоритетные запросы, обрабатываются запросы нормального приоритета, в порядке, также определяемом физическим адресом порта. Чтобы обеспечить гарантированное время отклика, нормальному запросу, прождавшему 200-300 миллисекунд, присваивается высокий приоритет.
При опросе порта, к которому подключен хаб нижнего уровня, инициируется опрос его портов и только после этого возобновляется опрос портов старшего хаба. Таким образом, все конечные узлы опрашиваются последовательно, независимо от уровня хаба, с которым они соединены.
Система тестирования соединений. При тестировании соединений станция и ее хаб обмениваются специальными тестовыми пакетами. Одновременно все остальные хабы получают уведомление о том, что где-то в сети происходит тестирование. Кроме верификации соединений можно получить информацию о типах устройств, подключенных к сети (хабах, мостах, шлюзах и конечных узлах), режимах их функционирования и адресах.
Тестирование соединений происходит при каждой инициализации узла и при каждом превышении заданного уровня ошибок передачи. Тестирование соединений между хабами аналогично тестированию соединений конечного узла.
Подготовка кадра передачи. Прежде, чем передать данные на физический уровень, необходимо дополнить его служебными заголовком и окончанием, включающими в себя заполнения поля данных (если это необходимо), адреса абонентов и контрольные последовательности.
Кадр передачи 100VG-AnyLAN
Предполагаемый стандарт IEEE-802.12 поддерживает три типа форматов кадров передачи данных: IEEE 802.3 (Ethernet), IEEE 802.5 (Token Ring) и специальный формат кадров тестирования соединений IEEE 802.3.
Стандарт ограничивает допустимую организацию сетей, запрещая использование различных форматов кадров в рамках одного сегмента сети. Каждый сегмент может поддерживать только один логический стандарт, а для построения гетерогенных сетей предписывается применение специальных мостов.
Порядок передачи данных для форматов Ethernet и Token Ring одинаков (первым передается байт старшего разряда, последним - младшего). Различается лишь порядок битов в байтах: в формате Ethernet первыми передаются младшие биты, а в Token Ring - старшие.
Кадр Ethernet (IEEE 802.3) должен содержать следующие поля:
DA - адрес получателя пакет (6 байт);
SA - адрес отправителя (6 байт);
L - указатель длины данных (2 байта);
данные пользователя и заполнители;
FCS - контрольная последовательность.
Кадр Token Ring (IEEE 802.5) содержит большее число полей. Некоторые из них протоколом 100VG-AnyLAN не используются, а сохранены лишь для того, чтобы обеспечить совместимость данных с сегментами 4 и 16 Мбит/сек (при обмене через соответствующие мосты):
АС - поле контроля доступа (1 байт, не используется);
FC - поле контроля кадра (1 байт, не используется);
DA - адрес получателя (6 байт);
SA - адрес отправителя (6 байт);
RI - информационное поле маршрутизатора (0-30 байт);
поле информации;
FCS - контрольная последовательность (4 байта).
Физический уровень сетей 100VG-AnyLAN
В модели ISO физическому уровню вменяется непосредственный процесс передачи битов данных от одного узла к другому. Разъемы, кабели, уровня сигналов, частоты и другие физические характеристики описываются именно этим уровнем.
В качестве электрического стандарта передачи данных разработчики решили вернуться к известному способу прямого двухуровнего кодирования (NRZ-коду), где высокий уровень сигнала соответствует логической единице, а низкий - нулю. Когда-то, на заре эры цифровой передачи данных, от такого способа отказались. В основном, это было связано с трудностями синхронизации и произошло вопреки большей плотности информации на один такт несущей частоты - два бита за один такт.
Использование кодировки 5B6B, предопределяющей равное число нулей и единиц в передаваемых данных, позволяет получить достаточную синхронизацию. Даже наличие трех битов одного уровня подряд (а большее их число запрещено кодировкой и интерпретируется как ошибка) не успевает привести к рассинхронизации передатчика и приемника.
Таким образом, при избыточности кода 20% пропускная способность канала увеличивается вдвое. При тактовой частоте 30 МГц обеспечивается передача 25 Мбит/сек исходных данных по одной паре, суммарный объем передачи по четырем парам одного кабеля составляет 100 Мбит/сек.
Управление передачей данных в сетях
Сети, построенные на неэкранированной витой паре, используют все четыре пары кабеля и могут функционировать как в полнодуплексном (для передачи сигналов управления), так и полудуплексном режиме, когда все четыре пары используются для передачи данных в одном направлении.
В сетях на экранированной паре или оптоволокне реализованы два однонаправленных канала: один на пример, другой на передачу. Прием и передача данных может осуществляться одновременно.
В сетях на оптоволокне или экранированной паре передача данных происходит аналогично. Небольшие отличия определяются наличием постоянно действующих в обе стороны каналов. Узел, например, может получать пакет и одновременно отправлять запрос на обслуживание.
